# 随机读写与顺序读写

机械盘和固态盘的区别：

机械盘：数据是存储的扇区的，读写是依靠磁头的摆动寻址的。顺序读写主要时间花费在了传输时间，随机读写需要多次寻道和旋转延迟。

固态盘：是由控制单元和固态存储单元（DRAM或FLASH芯片）组成，存储单元负责存储数据，控制单元负责读取、写入数据。

由于固态硬盘没有普通硬盘的机械结构，也不存在机械硬盘的寻道问题。



顺序读写和随机读写对比：

随机读写是相对顺序读写而言的，所谓随机读写，是指可以在任何时候将存取文件的指针指向文件内容的任何位置。一般情况下SAS机械硬盘主要是看顺序读写性能，SSD固态盘主要看随机读写性能。即顺序关注吞吐量，随机是关注IOPS。



顺序读写好坏标准是 “吞吐量MBPS”每秒钟读写数据的大小。读写一个大文件。

随机读写好坏的标准是“IOPS”,每秒钟读写文件的次数。读写多个小文件。

SSD硬盘的寻道时间几乎为0，顺序读写大文件的速度达到600M/s，随机读写达到了1000万次/s。

两种读写方式是面向不同的场景的，性能指标不同，但是 IOPS × 单次IO数据大小，转换成MB/s，就可以和进行读写性能对比。



文件的操作方式：

顺序读写：文件指针只能从头移动到尾。

随机读写：文件指针可以随意移动，根据需要。

随机示例：

假设存在一个文件尺寸为1024个字节的文件，如果按照顺序存取原则的话，我们只能采用类似于FileStream.read()或者FileReader.readLine()的方式来一段一段，或者一行一行地读取。

RandomAccessFile类的核心价值在于RandomAccessFile.seek()方法，通过这个方法，可以任意地指定当前存取文件的指针位置。

随时调用RandomAccessFile类的getFilePionter()方法，获取文件指针当前距离文件起始位置的偏移量。

小结：在日常项目开发中在设计存储时，一定要考虑顺序和随机，优化其性能达到最高。例如，当前大多数数据库使用的都是传统的机械磁盘，因此,整个系统设计要尽可能顺序I/O，避免昂贵的寻道时间和旋转延迟的开销.







