---
title: Kafka架构设计
date: 2020-06-19 11:00:59
tags:
---

官方文档：https://kafka.apache.org/documentation/#design

## 动机

Kafka 用于传送实时数据。它必须具有高吞吐量才能支持大量事件流，例如实时日志聚合。它将需要适当地处理大量数据积压，以便能够支持来自脱机系统的定期数据加载。这也意味着系统将不得不处理低延迟交付，以处理更多传统的消息传递用例。

我们希望支持对这些提要进行分区，分布式，实时处理，以创建新的派生提要。这激发了我们的分区和消费者模型。

最终，在将流馈送到其他数据系统进行服务的情况下，我们知道该系统必须能够在存在机器故障的情况下保证容错能力。

支持这些用途使我们设计出了许多独特的元素，与传统的消息传递系统相比，它更类似于数据库日志。在以下各节中，我们将概述设计的某些元素。



## 数据持久化

#### 文件系统

Kafka严重依赖文件系统来存储和缓存消息，人们普遍认为“磁盘速度很慢”，这使人们怀疑持久化的磁盘能否提供有竞争力的性能。实际上，磁盘的速度比人们期望的要慢得多。正确设计的磁盘结构通常可以和网络一样快。



