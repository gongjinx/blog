# Redis 数据持久化

一般都会使用 RDB 做数据持久化。

默认情况下，Redis将数据集的快照保存在磁盘上名为 `dump.rdb` 的二进制文件中，也可以手动调用 [SAVE](https://redis.io/commands/save) 或 [BGSAVE](https://redis.io/commands/bgsave) 命令来手动持久化。

下面的配置表示如果更改了至少1000个键，此配置将使Redis每60秒自动将数据集转储到磁盘上：

```
save 60 1000
```

这种策略称为*快照*。

我的实际配置如下：

```
save 900 1
save 300 10
save 60 10000
```



在服务器运行时，复制RDB文件是完全安全的。建议：

- 在服务器中创建一个cron作业，在一个目录中创建RDB文件的每小时快照，并在另一个目录中创建每日快照。
- 每次运行cron脚本时，请确保调用`find`命令以确保删除太旧的快照：例如，您可以每小时拍摄最近48小时的快照，每天拍摄一两个月的快照。确保使用数据和时间信息命名快照。
- 每天至少有一次确保将RDB快照传输到*数据中心**外部*或至少传输到运行Redis实例*的物理计算机外部*。